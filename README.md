# Project Miyana - 雅凪

## 1. プロジェクト概要

miyana プロジェクトは、理想の女性キャラクター「雅凪（みやな）」を LoRA（Low-Rank Adaptation）で具現化する取り組み。現在は、チェックポイント「Illustrious XL 1.1」を用いた高品質な LoRA の作成を目指している。

このプロジェクトの思想は以下の通り：

- キャラクター造形の一貫性と高解像度な表現を両立する
- 特定のスタイルに一時的に依存しつつも、最終的には汎用性の高いキャラクター表現を目指す
- 技術的検証と芸術的探究の両立

## 2. ロードマップ

### マイルストーン 1：LoRA モデル v3.0、プロンプト v3.0

- **目的**：特定のスタイルに依存した理想像の精緻化
- **手法**：
  - Illustrious XL 1.1 など汎用寄りチェックポイントの利用
  - スタイル、髪型、衣装を固定し、詳細化したプロンプトを作成
  - 局所最適から全体最適への構図展開（顔 → バストアップ → 全身 → 背面）

### マイルストーン 2：LoRA モデル v4.0、プロンプト v4.0

- **目的**：スタイル間の汎用性を追求した LoRA へ進化
- **手法**：

  - 多スタイル対応プロンプト設計
  - スタイル調整タグの実験と評価
  - 複数構図・複数表現の学習素材追加

### マイルストーン 3：LoRA 汎用化と公開展開

- **目的**：誰もが自由に「雅凪」を使える環境を提供
- **手法**：

  - モデルアーキテクチャの多様化（XL、Turbo、SD1.5 対応など）
  - モデル API 経由の活用（例：Web UI、Discord Bot、画像生成 API）

---

### 3. 本 Project のディレクトリ構造

- src: ソースコード。今のところは属性マップの markdown を保存
- prompts: 構図ごとのプロンプト。構図ごとにディレクトリを作成し、ポジティブ / ネガティブプロンプトをテキスト形式で保存
- learning_sources: LoRA 学習用に用いる素材の格納場所。構図ごとにディレクトリを作成し、そこに学習画像とタグファイルを設置

## 4. Markdown による属性マップの管理方法

### 属性マップの場所

src/attribute_map.md

### コンセプト

LoRA 構築・検証の効率化のため、プロンプトをカテゴリ別に構造化し、構図別に使用有無および重み付けの数値を設定する

### 構造

- 行
  - プロンプトタグ
- 列

  - 日本語の説明名
  - 実際のタグ
  - 構図別使用有無（front / back / left-side / close-up）

- 使用マーク

  - `o` = 使用
  - `x` = 不使用
  - `1.2` などの数値 = 重み付けをする場合の値

- カテゴリ例：全体品質、人物設定、体勢・構図、髪型、目、表情、衣装、装飾、背景 など

### 活用目的

- プロンプト構築の高速化
- 属性の一貫性維持と構図ごとの差異可視化
- LoRA 学習素材のバリエーション管理と再生成支援

## 5. 属性マップより出力されるプロンプトのフォーマット

ヒューマンリーダブルを保つため、以下のルールとする

- タグごとに一行改行。行末にカンマを含む
- カテゴリごと（Markdown のテーブルごと）に一行空行を追加
